# Slub分配器的实现


## Slub分配器的数据结构


### kmalloc用的缓冲区

![1532251868518.png](image/1532251868518.png)

![1532251904052.png](image/1532251904052.png)

![1532251917328.png](image/1532251917328.png)

### 缓冲区内部结构

![1532251928586.png](image/1532251928586.png)

![1532251946499.png](image/1532251946499.png)

* 进程根据对象大小找到相应的缓冲区，再根据当前所运行的cpu，找到对应地本地cpu缓存

![1532251980558.png](image/1532251980558.png)

![1532252049164.png](image/1532252049164.png)

![1532252899373.png](image/1532252899373.png)

![1532252907458.png](image/1532252907458.png)

* 解释连续16字节和两个不同地址8字节cas，单向和双向链表问题

![1532252928056.png](image/1532252928056.png)

![1532252944484.png](image/1532252944484.png)


![1532252963010.png](image/1532252963010.png)

![1532252979668.png](image/1532252979668.png)

![1532252990851.png](image/1532252990851.png)




## Slub分配器中对象布局

![1532258905389.png](image/1532258905389.png)

![1532258928186.png](image/1532258928186.png)


## 内存分配函数

![1532258941069.png](image/1532258941069.png)

![1532258950526.png](image/1532258950526.png)


![1532258957791.png](image/1532258957791.png)

![1532258965457.png](image/1532258965457.png)

![1532258973437.png](image/1532258973437.png)











## 分配操作




















## 释放操作














## 并发问题





















## Slub分配器的初始化



























## END
